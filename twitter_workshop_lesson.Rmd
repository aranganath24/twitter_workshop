---
title: "Introduction to Twitter Data in R"
author: "Aditya Ranganath"
date: "12/6/2021"
output:
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

```{r}
library(rtweet)
library(httpuv)
library(tidyverse)
library(tidytext)
library(wordcloud2)
library(qdapRegex)
library(tm)
```

```{r}
twitter_wordcloud<-function(twitterhandle, tweet_number){
  tweet_timeline<-get_timeline(twitterhandle, n=tweet_number)
  tweet_timeline_text<-str_c(tweet_timeline$text, collapse="")
  tweet_timeline_text<-str_remove_all(tweet_timeline_text, pattern='[:emoji:]')
  tweet_timeline_text<-tweet_timeline_text %>%
                              str_remove("\\n") %>%                   # remove linebreaks
                              rm_twitter_url() %>%                    # Remove URLS
                              rm_url() %>%
                              str_remove_all("#\\S+") %>%             # Remove any hashtags
                              str_remove_all("@\\S+") %>%             # Remove any @ mentions
                              removeWords(stopwords("english")) %>%   # Remove common words (a, the, it etc.)
                              removeNumbers() %>%
                              stripWhitespace() %>%
                              removeWords(c("amp")) %>% 
                              removePunctuation()

  textCorpus <- 
    Corpus(VectorSource(tweet_timeline_text)) %>%
    TermDocumentMatrix() %>%
    as.matrix()
  
  textCorpus <- sort(rowSums(textCorpus), decreasing=TRUE)
  textCorpus <- data.frame(word = names(textCorpus), freq=textCorpus, row.names = NULL)
  
  wordcloud <- wordcloud2(data = textCorpus, minRotation = 0, maxRotation = 0, ellipticity = 0.2)
  return(wordcloud)
  
}

```



```{r}
lebron_wordcloud<-twitter_wordcloud("KingJames", 400)
elon_wordcloud<-twitter_wordcloud("elonmusk", 400)
```


```{r}
elon_wordcloud
```

## next


ddddddddsfadfa
dafafadfafc

```{r}
lebron_wordcloud<-twitter_wordcloud("KingJames", 400)
lebron_wordcloud
```

https://github.com/Lchiffon/wordcloud2/issues/65



